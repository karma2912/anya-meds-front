"use client";

import React, { useState, useCallback } from "react";
import { useDropzone } from "react-dropzone";
import Link from "next/link"; // Added for navigation
import {
  FileText,
  Brain,
  Thermometer,
  Download,
  AlertCircle,
  CheckCircle,
  Upload,
  User,
  Activity,
  XCircle,
  Scan,
  BrainCircuit,
  ArrowLeft,
} from "lucide-react";
import {
  Card,
  CardContent,
  CardHeader,
  CardTitle,
  CardDescription,
} from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Progress } from "@/components/ui/progress";
import { Toggle } from "@/components/ui/toggle";
import { Label } from "@/components/ui/label";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Separator } from "@/components/ui/separator";
import { Alert, AlertDescription, AlertTitle } from "@/components/ui/alert";
import { FileScan } from "lucide-react";
import Image from "next/image";
import jsPDF from "jspdf";
import autoTable from "jspdf-autotable";
declare module "jspdf" {
  interface jsPDF {
    autoTable: (options: any) => jsPDF;
  }
}
const BrainDiagnosisPage = () => {
  const [imagePreview, setImagePreview] = useState<string | null>(null);
  const [imageFile, setImageFile] = useState<File | null>(null);
  const [isAnalyzing, setIsAnalyzing] = useState(false);
  const [showHeatmap, setShowHeatmap] = useState(false);
  const [currentStep, setCurrentStep] = useState(1);
  const [patientInfo, setPatientInfo] = useState({
    name: "",
    age: "",
    gender: "",
    scanDate: "",
    symptoms: "",
    weight: "",
    height: "",
    bloodPressure: "",
    allergies: "",
    medications: "",
    medicalHistory: "",
    scanType: "",
    contrastUsed: "",
    referringPhysician: "",
  });
  const [analysis, setAnalysis] = useState<{
    label: string;
    confidence: number;
    probabilities: { label: string; value: number }[];
    heatmap?: string;
    ai_summary?: string;
  } | null>(null);
  const [errors, setErrors] = useState<{ [key: string]: string }>({});
  const [apiError, setApiError] = useState<string | null>(null);

  const validatePatientInfo = () => {
    const newErrors: { [key: string]: string } = {};
    if (!patientInfo.name.trim()) newErrors.name = "Patient name is required";
    if (!patientInfo.age.trim()) newErrors.age = "Age is required";
    if (!patientInfo.gender.trim()) newErrors.gender = "Gender is required";
    if (!patientInfo.scanDate.trim())
      newErrors.scanDate = "Scan date is required";
    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handlePatientInfoChange = (field: string, value: string) => {
    setPatientInfo((prev) => ({ ...prev, [field]: value }));
    if (errors[field]) {
      setErrors((prev) => ({ ...prev, [field]: "" }));
    }
  };

  const onDrop = useCallback((acceptedFiles: File[]) => {
    const file = acceptedFiles[0];
    if (file) {
      if (file.size > 20 * 1024 * 1024) {
        setApiError("File size exceeds 20MB limit.");
        return;
      }
      setApiError(null);
      setImageFile(file);
      setImagePreview(URL.createObjectURL(file));
      setCurrentStep(2);
    }
  }, []);

  const { getRootProps, getInputProps, isDragActive } = useDropzone({
    onDrop,
    accept: {
      "image/jpeg": [".jpeg", ".jpg"],
      "image/png": [".png"],
      "application/dicom": [".dcm"],
    },
    maxFiles: 1,
    onDropRejected: (fileRejections) => {
      setApiError(
        fileRejections
          .map((fr) => fr.errors.map((e) => e.message).join(", "))
          .join("; ")
      );
    },
  });

  const handleStartAnalysis = async () => {
    if (!validatePatientInfo()) {
      setApiError("Please fill in all required patient information.");
      return;
    }
    if (!imageFile) {
      setApiError("No MRI scan uploaded.");
      return;
    }

    setCurrentStep(3);
    setIsAnalyzing(true);
    setApiError(null);

    try {
      const formData = new FormData();
      formData.append("image", imageFile);
      formData.append("patientInfo", JSON.stringify(patientInfo));

      const res = await fetch("http://localhost:5000/api/brain", {
        method: "POST",
        body: formData,
      });

      const data = await res.json();

      if (res.ok) {
        setAnalysis(data);
        setCurrentStep(4);
      } else {
        console.error("Backend error response:", data);
        setApiError(data.error || "An unknown error occurred during analysis.");
        setCurrentStep(2);
      }
    } catch (err: any) {
      console.error("Prediction fetch error:", err);
      if (err instanceof TypeError && err.message.includes("Failed to fetch")) {
        setApiError(
          "Connection failed. Please ensure the analysis server is running."
        );
      } else {
        setApiError("A client-side error occurred. Please try again.");
      }
      setCurrentStep(2);
    } finally {
      setIsAnalyzing(false);
    }
  };

  const handleDownloadReport = () => {
    console.log("Brain Scan PDF Report generation initiated.");

    const doc = new jsPDF();
    const pageWidth = doc.internal.pageSize.getWidth();
    const margin = 20;
    const primaryColor: [number, number, number] = [95, 50, 180]; // A deep purple for neurology
    const secondaryColor: [number, number, number] = [100, 100, 100];
    const accentColor: [number, number, number] = [220, 53, 69]; // A clinical red for alerts

    // ===== 1. COVER PAGE (With Image) =====

    const logoBase64 =
      "data:image/png;base64,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";

    // --- Calculate image dimensions and position ---
    const imageWidth = 120;
    const imageHeight = 40;
    const imageX = (pageWidth - imageWidth) / 2; // Center horizontally
    const imageY = 30; // Position from the top

    // --- Add the image to the document ---
    doc.addImage(logoBase64, "JPEG", imageX, imageY, imageWidth, imageHeight);

    // --- Adjust Y positions of text to make space for the logo ---
    const contentStartY = imageY + imageHeight + 20;

    doc.setFont("helvetica", "bold");
    doc.setFontSize(40);
    doc.setTextColor(...primaryColor);
    // MODIFIED: Title changed for a neurological center
    doc.text("Dr. Yash Rajak", pageWidth / 2, contentStartY, {
      align: "center",
    });

    doc.setFontSize(18);
    doc.setTextColor(...secondaryColor);
    // MODIFIED: Report type changed to Brain Scan
    doc.text("Brain Scan Analysis Report", pageWidth / 2, contentStartY + 15, {
      align: "center",
    });

    // Patient info box (also moved down)
    const boxY = contentStartY + 45;
    doc.setFillColor(245, 245, 245);
    doc.rect(margin, boxY, pageWidth - margin * 2, 40, "F");
    doc.setDrawColor(220, 220, 220);
    doc.rect(margin, boxY, pageWidth - margin * 2, 40);

    doc.setFontSize(12);
    doc.setTextColor(0, 0, 0);
    doc.text(`Patient: ${patientInfo.name}`, margin + 10, boxY + 10);
    doc.text(
      `Date: ${new Date().toLocaleDateString()}`,
      margin + 10,
      boxY + 20
    );
    doc.text(
      `Report ID: ${Math.random().toString(36).substring(2, 10).toUpperCase()}`,
      pageWidth - margin - 10,
      boxY + 10,
      { align: "right" }
    );

    // ===== 2. PATIENT DETAILS PAGE (MODIFIED FOR BRAIN SCAN) =====
    doc.addPage();

    doc.setFontSize(18);
    doc.setTextColor(...primaryColor);
    doc.text("Patient & Scan Information", margin, 30);

    autoTable(doc, {
      startY: 40,
      head: [["Detail", "Value"]],
      body: [
        ["Full Name", patientInfo.name],
        ["Age", patientInfo.age],
        ["Gender", patientInfo.gender],
        ["Weight", patientInfo.weight || "Not specified"],
        ["Height", patientInfo.height || "Not specified"],
        ["Blood Pressure", patientInfo.bloodPressure || "Not specified"],
        [
          "Referring Physician",
          patientInfo.referringPhysician || "Not specified",
        ],
      ],
      theme: "grid",
      headStyles: {
        fillColor: primaryColor,
        textColor: 255,
        fontStyle: "bold",
      },
      styles: {
        halign: "left",
        cellPadding: 4,
      },
      columnStyles: {
        0: { fontStyle: "bold", cellWidth: 50 },
      },
    });

    autoTable(doc, {
      startY: (doc as any).lastAutoTable.finalY + 10,
      head: [["Clinical & Scan Details", ""]],
      body: [
        ["Scan Date", patientInfo.scanDate || "Not specified"],
        ["Scan Type", patientInfo.scanType || "Not specified"],
        ["Contrast Used", patientInfo.contrastUsed || "Not specified"],
        ["Symptoms", patientInfo.symptoms || "None reported"],
        ["Medications", patientInfo.medications || "None reported"],
        ["Allergies", patientInfo.allergies || "None reported"],
        ["Medical History", patientInfo.medicalHistory || "None reported"],
      ],
      theme: "plain",
      styles: {
        halign: "left",
        cellPadding: 4,
      },
      columnStyles: {
        0: { fontStyle: "bold", cellWidth: 50 },
      },
    });

    // ===== 3. ANALYSIS RESULTS PAGE (No functional changes) =====
    doc.addPage();

    doc.setFontSize(18);
    doc.setTextColor(...primaryColor);
    doc.text("Diagnosis Summary", margin, 30);

    doc.setFillColor(248, 245, 255);
    doc.rect(margin, 40, pageWidth - margin * 2, 30, "F");
    doc.setDrawColor(230, 220, 255);
    doc.rect(margin, 40, pageWidth - margin * 2, 30);

    doc.setFontSize(14);
    doc.setTextColor(0, 0, 0);
    doc.text("Primary Finding:", margin + 10, 50);
    doc.setFont("helvetica", "bold");
    doc.setTextColor(...primaryColor);
    doc.text(analysis?.label || "No significant finding", margin + 50, 50);

    doc.setFont("helvetica", "normal");
    doc.setTextColor(0, 0, 0);
    doc.text("Confidence Level:", margin + 10, 60);
    doc.setFont("helvetica", "bold");
    doc.setTextColor(...accentColor);
    doc.text(
      `${((analysis?.confidence || 0) * 100).toFixed(2)}%`,
      margin + 55,
      60
    );

    const confidence = analysis?.confidence || 0;
    const meterWidth = pageWidth - margin * 2 - 20;
    doc.setFillColor(230, 230, 230);
    doc.rect(margin + 10, 70, meterWidth, 8, "F");
    doc.setFillColor(...(confidence > 0.7 ? primaryColor : accentColor));
    doc.rect(margin + 10, 70, meterWidth * confidence, 8, "F");

    doc.setFontSize(16);
    doc.setTextColor(...primaryColor);
    doc.text("Potential Condition Probabilities", margin, 100);

    const tableData =
      analysis?.probabilities
        .sort((a, b) => b.value - a.value)
        .map((p) => [p.label, `${(p.value * 100).toFixed(2)}%`]) || [];

    autoTable(doc, {
      startY: 110,
      head: [["Condition", "Probability"]],
      body: tableData,
      theme: "striped",
      headStyles: {
        fillColor: primaryColor,
        textColor: 255,
        fontStyle: "bold",
      },
      columnStyles: {
        0: { cellWidth: "auto" },
        1: { cellWidth: 40, halign: "right" },
      },
      styles: {
        fontSize: 10,
        cellPadding: 3,
      },
    });

    // ===== 4. VISUALIZATION PAGE (MODIFIED FOR BRAIN SCAN) =====
    if (imagePreview) {
      doc.addPage();
      doc.setFontSize(18);
      doc.setTextColor(...primaryColor);
      doc.text("Clinical Imaging", margin, 30);

      doc.setFontSize(12);
      doc.setTextColor(...secondaryColor);
      doc.text("Uploaded Brain Scan:", margin, 40);

      const imgData = imagePreview;
      const imgWidth = (pageWidth - 60) - margin * 2;
      // Calculate height to maintain aspect ratio (assuming 1:1 for MRI slices)
      const imgHeight = imgWidth;
      doc.addImage(imgData, "JPEG", margin, 45, imgWidth, imgHeight);

      if (analysis?.heatmap) {
        doc.setFontSize(12);
        doc.setTextColor(...secondaryColor);
        doc.text(
          "AI Heatmap Analysis (Region of Interest):",
          margin,
          45 + imgHeight + 10
        );

        const heatmapData = `data:image/png;base64,${analysis.heatmap}`;
        doc.addImage(
          heatmapData,
          "PNG",
          margin,
          45 + imgHeight + 15,
          imgWidth,
          imgHeight
        );
      }
    }

    // ===== 5. DISCLAIMER PAGE (No functional changes) =====
    doc.addPage();
    doc.setFontSize(18);
    doc.setTextColor(...primaryColor);
    doc.text("Report Disclaimer", margin, 30);

    doc.setFontSize(10);
    doc.setTextColor(0, 0, 0);
    const disclaimerText = [
      "This report was generated by AnYa Med's AI diagnostic system and is intended for use by qualified healthcare professionals only.",
      "",
      "The information contained in this report:",
      "- Is not a substitute for professional medical advice, diagnosis, or treatment.",
      "- Should be interpreted in conjunction with other clinical findings and patient history.",
      "- May contain inaccuracies or errors inherent to AI systems.",
      "",
      "The probability scores represent the AI model's confidence in its predictions and do not constitute definitive diagnoses.",
      "",
      "AnYa Med disclaims all liability for any decisions made based on this report. Healthcare providers must exercise their own professional judgment when interpreting these results.",
    ];

    let currentY = 50;
    disclaimerText.forEach((line) => {
      const splitText = doc.splitTextToSize(line, pageWidth - margin * 2);
      doc.text(splitText, margin, currentY);
      currentY += splitText.length * 5 + (line === "" ? 2 : 0);
    });

    // Footer (Improved to appear on every page)
    const pageCount = (doc as any).internal.getNumberOfPages();
    for (let i = 1; i <= pageCount; i++) {
      doc.setPage(i);
      doc.setFontSize(8);
      doc.setTextColor(...secondaryColor);
      doc.text(
        `Report generated on ${new Date().toLocaleString()}`,
        margin,
        doc.internal.pageSize.height - 10
      );
      doc.text(
        "AnYa Meds - AI Diagnostic Systems",
        pageWidth - margin,
        doc.internal.pageSize.height - 10,
        { align: "right" }
      );
      doc.text(
        `Page ${i} of ${pageCount}`,
        pageWidth / 2,
        doc.internal.pageSize.height - 10,
        { align: "center" }
      );
    }

    // ===== SAVE THE PDF =====
    // MODIFIED: Filename changed from "AnYaChest" to "AnYaBrain"
    doc.save(
      `AnYaBrain_Report_${
        patientInfo.name.replace(/\s/g, "_") || "patient"
      }.pdf`
    );
  };
  const handleNewAnalysis = () => {
    setImagePreview(null);
    setImageFile(null);
    setAnalysis(null);
    setPatientInfo({
      name: "",
      age: "",
      gender: "",
      scanDate: "",
      symptoms: "",
      weight: "",
      height: "",
      bloodPressure: "",
      allergies: "",
      medications: "",
      medicalHistory: "",
      scanType: "",
      contrastUsed: "",
      referringPhysician: "",
    });
    setCurrentStep(1);
    setErrors({});
    setApiError(null);
    setShowHeatmap(false);
  };

  const renderStepIndicator = () => (
    <div className="flex items-center justify-center mb-8">
      <div className="flex items-center space-x-2 sm:space-x-4">
        {[1, 2, 3, 4].map((step, index) => (
          <React.Fragment key={step}>
            <div
              className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all ${
                step === currentStep
                  ? "bg-purple-600 text-white"
                  : step < currentStep
                  ? "bg-green-600 text-white"
                  : "bg-gray-200 text-gray-600"
              }`}
            >
              {step < currentStep ? <CheckCircle className="w-4 h-4" /> : step}
            </div>
            {index < 3 && (
              <div
                className={`w-12 sm:w-16 h-0.5 transition-all ${
                  step < currentStep ? "bg-green-600" : "bg-gray-200"
                }`}
              />
            )}
          </React.Fragment>
        ))}
      </div>
    </div>
  );

  const renderStep1 = () => (
    <Card className="bg-gradient-to-r from-purple-50 to-white">
      <CardHeader className="text-center">
        <CardTitle className="text-2xl text-purple-600 flex items-center justify-center gap-2">
          <Scan className="w-6 h-6" />
          Upload Brain MRI
        </CardTitle>
        <CardDescription>
          Upload axial, sagittal, or coronal MRI slices for analysis
        </CardDescription>
      </CardHeader>
      <CardContent>
        <div
          {...getRootProps()}
          className={`border-2 border-dashed rounded-xl p-12 text-center cursor-pointer transition-colors ${
            isDragActive
              ? "border-purple-400 bg-purple-50"
              : "border-gray-300 hover:border-purple-300"
          }`}
        >
          <input {...getInputProps()} />
          <div className="flex flex-col items-center justify-center gap-4">
            <div className="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center">
              <BrainCircuit className="w-10 h-10 text-purple-600" />
            </div>
            <div>
              <p className="text-lg font-medium text-gray-700">
                {isDragActive
                  ? "Drop the MRI scan here"
                  : "Drag & drop a brain MRI image"}
              </p>
              <p className="text-sm text-gray-500 mt-1">
                or click to select from your device
              </p>
            </div>
            <div className="bg-gray-100 px-4 py-2 rounded-full">
              <p className="text-xs text-gray-600">
                Supported formats: JPG, PNG, DICOM  Max size: 20MB
              </p>
            </div>
          </div>
        </div>
        {apiError && (
          <Alert variant="destructive" className="mt-4">
            <XCircle className="h-4 w-4" />
            <AlertTitle>Error</AlertTitle>
            <AlertDescription>{apiError}</AlertDescription>
          </Alert>
        )}
      </CardContent>
    </Card>
  );

  const renderStep2 = () => (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <Card className="lg:col-span-2">
        <CardHeader>
          <CardTitle className="text-purple-600 flex items-center gap-2">
            <User className="w-5 h-5" />
            Patient Information
          </CardTitle>
          <CardDescription>
            Complete all required fields before analysis
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <Label htmlFor="patient-name" className="text-sm font-medium">
                Patient Name <span className="text-red-500">*</span>
              </Label>
              <Input
                id="patient-name"
                value={patientInfo.name}
                onChange={(e) =>
                  handlePatientInfoChange("name", e.target.value)
                }
                placeholder="Full name"
                className={errors.name ? "border-red-500" : ""}
              />
              {errors.name && (
                <p className="text-red-500 text-xs mt-1">{errors.name}</p>
              )}
            </div>
            <div>
              <Label htmlFor="patient-age" className="text-sm font-medium">
                Age <span className="text-red-500">*</span>
              </Label>
              <Input
                id="patient-age"
                type="number"
                value={patientInfo.age}
                onChange={(e) => handlePatientInfoChange("age", e.target.value)}
                placeholder="Years"
                className={errors.age ? "border-red-500" : ""}
              />
              {errors.age && (
                <p className="text-red-500 text-xs mt-1">{errors.age}</p>
              )}
            </div>
            <div>
              <Label htmlFor="patient-gender" className="text-sm font-medium">
                Gender <span className="text-red-500">*</span>
              </Label>
              <Input
                id="patient-gender"
                value={patientInfo.gender}
                onChange={(e) =>
                  handlePatientInfoChange("gender", e.target.value)
                }
                placeholder="Male/Female/Other"
                className={errors.gender ? "border-red-500" : ""}
              />
              {errors.gender && (
                <p className="text-red-500 text-xs mt-1">{errors.gender}</p>
              )}
            </div>
            <div>
              <Label htmlFor="scan-date" className="text-sm font-medium">
                Scan Date <span className="text-red-500">*</span>
              </Label>
              <Input
                id="scan-date"
                type="date"
                value={patientInfo.scanDate}
                onChange={(e) =>
                  handlePatientInfoChange("scanDate", e.target.value)
                }
                className={errors.scanDate ? "border-red-500" : ""}
              />
              {errors.scanDate && (
                <p className="text-red-500 text-xs mt-1">{errors.scanDate}</p>
              )}
            </div>
            <div>
              <Label htmlFor="weight" className="text-sm font-medium">
                Weight (kg)
              </Label>
              <Input
                id="weight"
                type="number"
                value={patientInfo.weight}
                onChange={(e) =>
                  handlePatientInfoChange("weight", e.target.value)
                }
                placeholder="Weight in kg"
              />
            </div>
            <div>
              <Label htmlFor="height" className="text-sm font-medium">
                Height (cm)
              </Label>
              <Input
                id="height"
                type="number"
                value={patientInfo.height}
                onChange={(e) =>
                  handlePatientInfoChange("height", e.target.value)
                }
                placeholder="Height in cm"
              />
            </div>
            <div>
              <Label htmlFor="bloodPressure" className="text-sm font-medium">
                Blood Pressure
              </Label>
              <Input
                id="bloodPressure"
                value={patientInfo.bloodPressure}
                onChange={(e) =>
                  handlePatientInfoChange("bloodPressure", e.target.value)
                }
                placeholder="e.g., 120/80"
              />
            </div>
            <div>
              <Label htmlFor="scanType" className="text-sm font-medium">
                MRI Scan Type
              </Label>
              <Input
                id="scanType"
                value={patientInfo.scanType}
                onChange={(e) =>
                  handlePatientInfoChange("scanType", e.target.value)
                }
                placeholder="e.g., T1, T2, FLAIR"
              />
            </div>
            <div className="md:col-span-2">
              <Label htmlFor="symptoms" className="text-sm font-medium">
                Neurological Symptoms
              </Label>
              <Textarea
                id="symptoms"
                value={patientInfo.symptoms}
                onChange={(e) =>
                  handlePatientInfoChange("symptoms", e.target.value)
                }
                placeholder="e.g., Headaches, seizures, vision changes"
                rows={2}
              />
            </div>
            <div className="md:col-span-2">
              <Label htmlFor="medicalHistory" className="text-sm font-medium">
                Relevant Medical History
              </Label>
              <Textarea
                id="medicalHistory"
                value={patientInfo.medicalHistory}
                onChange={(e) =>
                  handlePatientInfoChange("medicalHistory", e.target.value)
                }
                placeholder="Previous neurological conditions, surgeries, etc."
                rows={2}
              />
            </div>
          </div>
        </CardContent>
      </Card>

      <Card className="h-full">
        <CardHeader>
          <CardTitle className="text-purple-600 flex items-center gap-2">
            <FileScan className="w-5 h-5" />
            MRI Scan Preview
          </CardTitle>
          <CardDescription>Uploaded brain MRI for analysis</CardDescription>
        </CardHeader>
        <CardContent className="h-full flex flex-col">
          <div className="flex-1 flex items-center justify-center bg-gray-100 rounded-lg overflow-hidden border border-gray-200">
            {imagePreview ? (
              <Image
                src={imagePreview}
                alt="Uploaded MRI"
                width={400}
                height={400}
                className="w-full h-full object-contain p-2"
              />
            ) : (
              <div className="text-gray-400 text-center p-4">
                <FileScan className="mx-auto w-8 h-8 mb-2" />
                <p>No MRI scan uploaded</p>
              </div>
            )}
          </div>
          <div className="mt-4 grid grid-cols-2 gap-2">
            <Button
              variant="outline"
              onClick={handleNewAnalysis}
              className="w-full"
            >
              Cancel
            </Button>
            <Button
              onClick={handleStartAnalysis}
              className="w-full bg-purple-600 hover:bg-purple-700"
              disabled={!imagePreview}
            >
              <Activity className="w-4 h-4 mr-2" />
              Analyze MRI
            </Button>
          </div>
        </CardContent>
      </Card>

      {apiError && (
        <Alert variant="destructive" className="lg:col-span-3 mt-4">
          <XCircle className="h-4 w-4" />
          <AlertTitle>Error</AlertTitle>
          <AlertDescription>{apiError}</AlertDescription>
        </Alert>
      )}
    </div>
  );

  const renderStep3 = () => (
    <Card className="bg-gradient-to-r from-purple-50 to-white">
      <CardHeader className="text-center">
        <CardTitle className="text-2xl text-purple-600 flex items-center justify-center gap-2">
          <Brain className="w-6 h-6" />
          Analyzing Brain MRI
        </CardTitle>
        <CardDescription>
          Deep learning model processing neurological patterns...
        </CardDescription>
      </CardHeader>
      <CardContent>
        <div className="flex flex-col items-center justify-center gap-6 py-12">
          <div className="relative">
            <div className="w-20 h-20 rounded-full bg-purple-100 flex items-center justify-center animate-pulse">
              <Brain className="w-10 h-10 text-purple-600" />
            </div>
            <div className="absolute -inset-3 border-4 border-purple-200 rounded-full animate-ping opacity-75"></div>
          </div>
          <div className="text-center space-y-2">
            <p className="text-lg font-medium text-gray-700">
              Detecting neurological patterns...
            </p>
            <p className="text-sm text-gray-500">
              3D convolutional neural network processing
            </p>
          </div>
          <div className="w-full max-w-md">
            <Progress value={undefined} className="h-2 bg-purple-100" />
            <p className="text-xs text-gray-500 text-center mt-2">
              Analyzing brain structures and potential abnormalities...
            </p>
          </div>
        </div>
      </CardContent>
    </Card>
  );

  const renderStep4 = () => (
    <div className="space-y-6">
      <Card className="border-green-200 bg-green-50">
        <CardHeader>
          <CardTitle className="text-green-700 flex items-center gap-2">
            <CheckCircle className="w-5 h-5" />
            Neurological Analysis Complete
          </CardTitle>
          <CardDescription>
            Modal has completed evaluation of brain structures
          </CardDescription>
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div>
              <h3 className="text-lg font-semibold mb-2">
                MRI Scan with GradCam Markers
              </h3>
              <div className="relative">
                <div className="border rounded-xl overflow-hidden bg-gray-100">
                  {imagePreview && (
                    <div className="relative">
                      <Image
                        src={imagePreview}
                        alt="Analyzed MRI"
                        width={400}
                        height={400}
                        className={`w-full h-auto object-contain transition-opacity duration-300 ${
                          showHeatmap ? "opacity-70" : ""
                        }`}
                      />
                      {showHeatmap && analysis?.heatmap && (
                        <Image
                          src={`data:image/png;base64,${analysis.heatmap}`}
                          alt="Neurological heatmap overlay"
                          width={400}
                          height={400}
                          className="absolute inset-0 w-full h-full object-contain mix-blend-multiply"
                        />
                      )}
                    </div>
                  )}
                </div>
                {analysis?.heatmap && (
                  <div className="absolute top-2 right-2">
                    <Toggle
                      pressed={showHeatmap}
                      onPressedChange={setShowHeatmap}
                      className="bg-white/90 backdrop-blur-sm"
                    >
                      <Activity className="w-4 h-4 mr-1" />
                      Activation Map
                    </Toggle>
                  </div>
                )}
              </div>
            </div>

            <div className="space-y-4">
              <div>
                <h3 className="text-lg font-semibold mb-2">
                  Neurological Findings
                </h3>
                <div
                  className={`px-4 py-3 rounded-lg font-bold text-lg text-center ${
                    analysis?.label.includes("Normal")
                      ? "bg-green-100 text-green-800"
                      : "bg-purple-100 text-purple-800"
                  }`}
                >
                  {analysis?.label}
                </div>
                <p className="text-sm text-gray-600 mt-1 text-center">
                  {analysis?.label.includes("Tumor")
                    ? "Structural abnormality detected"
                    : "No significant structural abnormalities found"}
                </p>
              </div>

              <div>
                <h3 className="text-lg font-semibold mb-2">Model Confidence</h3>
                <div className="flex items-center gap-4">
                  <div className="w-16 h-16 rounded-full bg-purple-50 flex items-center justify-center flex-shrink-0">
                    <span className="text-xl font-bold text-purple-600">
                      {analysis ? Math.round(analysis.confidence * 100) : 0}%
                    </span>
                  </div>
                  <div className="flex-1">
                    <Progress
                      value={analysis ? analysis.confidence * 100 : 0}
                      className="h-3 bg-purple-100"
                    />
                    <p className="text-sm text-gray-600 mt-1">
                      {analysis && analysis.confidence >= 0.9
                        ? "High confidence - Clear neurological indicators"
                        : analysis && analysis.confidence >= 0.7
                        ? "Moderate confidence - Clinical correlation recommended"
                        : "Low confidence - Additional imaging suggested"}
                    </p>
                  </div>
                </div>
              </div>

              <div>
                <h3 className="text-lg font-semibold mb-2">
                  Differential Probabilities
                </h3>
                <div className="space-y-2">
                  {analysis?.probabilities
                    .sort((a, b) => b.value - a.value)
                    .map((prob) => (
                      <div key={prob.label} className="flex items-center gap-3">
                        <span
                          className="w-32 text-sm text-gray-600 truncate"
                          title={prob.label}
                        >
                          {prob.label}
                        </span>
                        <Progress
                          value={prob.value * 100}
                          className="h-2 flex-1"
                        />
                        <span className="w-12 text-right text-sm font-medium">
                          {Math.round(prob.value * 100)}%
                        </span>
                      </div>
                    ))}
                </div>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>
      {analysis?.ai_summary && (
        <Card>
          <CardHeader>
            <CardTitle className="text-blue-600 flex items-center gap-2">
              <FileText className="w-5 h-5" />
              AI-Generated Summary
            </CardTitle>
          </CardHeader>
          <CardContent>
            <p className="text-gray-700 leading-relaxed">
              {analysis.ai_summary}
            </p>
          </CardContent>
        </Card>
      )}

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <Card>
          <CardHeader>
            <CardTitle className="text-purple-600">
              Patient Neurological Profile
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <p className="text-sm font-medium text-gray-500">Name</p>
                  <p className="text-gray-900">{patientInfo.name}</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-gray-500">Age</p>
                  <p className="text-gray-900">{patientInfo.age} years</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-gray-500">Gender</p>
                  <p className="text-gray-900">{patientInfo.gender}</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-gray-500">Scan Date</p>
                  <p className="text-gray-900">{patientInfo.scanDate}</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-gray-500">Weight</p>
                  <p className="text-gray-900">{patientInfo.weight || "N/A"}</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-gray-500">Height</p>
                  <p className="text-gray-900">{patientInfo.height || "N/A"}</p>
                </div>
                {patientInfo.symptoms && (
                  <div className="md:col-span-2">
                    <p className="text-sm font-medium text-gray-500">
                      Symptoms
                    </p>
                    <p className="text-gray-900">{patientInfo.symptoms}</p>
                  </div>
                )}
              </div>
              <Separator />
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <p className="text-sm font-medium text-gray-500">AI Model</p>
                  <p className="text-gray-900">3D ResNet50 v1.2</p>
                </div>
                <div>
                  <p className="text-sm font-medium text-gray-500">
                    Analysis Date
                  </p>
                  <p className="text-gray-900">
                    {new Date().toLocaleDateString()}
                  </p>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <CardTitle className="text-purple-600">Next Steps</CardTitle>
            <CardDescription>
              Download full report or start new analysis
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              <Button
                className="w-full bg-purple-600 hover:bg-purple-700"
                onClick={handleDownloadReport}
              >
                <Download className="w-4 h-4 mr-2" />
                Download Neurological Report
              </Button>
              <Button
                variant="outline"
                className="w-full border-purple-600 text-purple-600 hover:bg-purple-50"
                onClick={handleNewAnalysis}
              >
                Analyze New MRI Scan
              </Button>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-gray-50">
      <div className="container mx-auto px-4 py-8 relative">
        {/* Back Button - Renders only on Step 1 */}
        {currentStep === 1 && (
          <div className="absolute top-8 left-4">
            <Button
              asChild
              variant="outline"
              className="flex items-center gap-2"
            >
              <Link href="/">
                <ArrowLeft className="w-4 h-4" />
                <span className="hidden sm:inline">Back to Home</span>
              </Link>
            </Button>
          </div>
        )}
        {currentStep === 4 && (
          <div className="absolute top-8 left-4">
            <Button
              asChild
              variant="outline"
              className="flex items-center gap-2"
            >
              <Link href="/">
                <ArrowLeft className="w-4 h-4" />
                <span className="hidden sm:inline">Back to Home</span>
              </Link>
            </Button>
          </div>
        )}
        <div className="text-center mb-8">
          <h1 className="text-3xl sm:text-4xl font-bold text-purple-600 mb-2 flex items-center justify-center gap-3">
            <BrainCircuit className="w-8 h-8" />
            AnYa-Meds Brain System
          </h1>
          <p className="text-gray-600 text-md sm:text-lg">
            Deep Learning Brain MRI Analysis Platform
          </p>
        </div>
        {renderStepIndicator()}

        <div className="max-w-6xl mx-auto">
          {currentStep === 1 && renderStep1()}
          {currentStep === 2 && renderStep2()}
          {currentStep === 3 && renderStep3()}
          {currentStep === 4 && renderStep4()}
        </div>

        <Alert className="mt-8 max-w-6xl mx-auto border-blue-300 bg-blue-50">
          <AlertCircle className="w-5 h-5 text-blue-700" />
          <AlertDescription className="text-blue-800 text-sm">
            <strong>Clinical Note:</strong> This AI tool detects common
            neurological abnormalities but cannot identify all possible
            conditions. False negatives may occur. Always correlate with
            clinical findings and consider follow-up imaging when indicated.
          </AlertDescription>
        </Alert>
      </div>
    </div>
  );
};

export default BrainDiagnosisPage;
